<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
</head>

<body>
  <input type="text">
  <script>
    // 根据长度截取字符串
    // function subText(str = '', length = 0) {
    //   if(!str.length) return str;
    //   if(str.length > length) return str.substr(0, length);
    //   return str;
    // }
    // function formattedData(srcData) {
    //   for(let item in srcData){
    //     // console.log(srcData)
    //     srcData[item] = subText(srcData[item], 5)
    //   }
    //   return srcData
    // }

    // const obj = {
    //   name: '张三',
    //   age: 20,
    //   address:"哈哈哈哈哈",
    //   msg:'12j3kjdfflkajsfr d'
    // }

    // console.log(obj);
    // formattedData(obj)
    // console.log(obj);

    // var tempObj = {
    //   name: '张三',
    //   age: 20,
    //   address: '南山科技园',
    //   friend: {
    //     name: 'Frank',
    //     age: 22
    //   },
    // }
    // function fn(obj) {
    //   return JSON.parse(JSON.stringify(obj, (key, val) => {
    //     if(typeof val === 'string') {
    //       console.log(key, ':' ,val)
    //       return val
    //     }
    //     return val
    //   }))
    // }
    // fn(tempObj)

    // let dom = document.querySelector('input')
    // dom.addEventListener('input',(val)=>{
    //   temp(val.target.value);
    //   // console.log('haha',val.target.value)
    // })
    // function fn1() {
    //   let time = null;
    //   return function fn2(val) {
    //     console.log(time)
    //     if (time) {
    //       clearTimeout(time)
    //     }
    //     time = setTimeout(() => {
    //       console.log('val', val)
    //     }, 1000);
    //   };
    // }
    // var temp = fn1();


    Meteor.call('debug.getConcreteData', 'WxUser', {
      'tel': '13762329872'
    }, (err, result) => {
      console.log(result)
    })

    Meteor.call('debug.getConcreteData', 'User', {
      "profile.tel": "13165202089",
      tenantCode: "zszq"
    }, (err, result) => {
      console.log(result)
    })


    // Meteor.call('debug.getConcreteData', 'CheckinRecord', { 'meetingId': 'K5czfeTSkt3pjRhQi',"isDeleted": {$ne: true}, "checkinDate": {$lt: new Date()} }, (err, result) => {
    //   console.log(result)
    // })


    // Meteor.call('debug.getConcreteData', 'Investor', { 'organizationId_contact_tenantCode': 'ncD98EJEtbqh4QXer_陈鹏扬13761620682_htzq', isDeleted:false}, (err, result) => {
    //           console.log(result)
    //         })

    Meteor.call('debug.getConcreteData', 'Investor', {
      'tel': '18616529227',
      'tenantCode': 'zxjt',
      "isDeleted": true
    }, (err, result) => {
      console.log(result)
    })

    Meteor.call('debug.getConcreteData', 'Company', {
      'tenantCode': 'dbzq',
      name: '晶瑞电材',
      "shareCode": "300655"
    }, (err, result) => {
      console.log(result)
    })


    Meteor.call('debug.countData', 'CheckinRecord', {
      'meetingId': 'K5czfeTSkt3pjRhQi',
      "isDeleted": {
        $ne: true
      },
      "checkinDate": new Date("2023-11-23T16:00:00.253+0000")
    }, (err, result) => {
      console.log(result)
    })

    Meteor.call('debug.getConcreteData', 'CheckinRecord', {
      'meetingId': 't5WZvPBoK4ij9iDnY',
      "isDeleted": {
        $ne: true
      },
      name: "万业企业",
      "checkinDate": new Date("2023-11-23T02:00:08+0000")
    }, (err, result) => {
      console.log(result)
    })

    Meteor.call('debug.getConcreteData', 'Schedule', {
      _id: "WGBFBWrQwAwXFMDiE",
      tenantCode: "fzzq"
    }, (err, result) => {
      console.log(result)
    })


    // 根据 tenantCode 和 name 查询机构
    Meteor.call('debug.getConcreteData', 'Organization', {
        name: '圆信永丰基金管理有限公司',
        tenantCode: 'mszq'
      },
      (err, result) => {
        console.log(result)
      })

    // id 查询机构
    Meteor.call('debug.getConcreteData', 'Organization', {
        _id:"PRQa5ndXmYcrqkk4v"
      },
      (err, result) => {
        console.log(result)
      })


    // 根据 tel 查询客户
    Meteor.call('debug.getConcreteData', 'CheckinAdmin', {
        tel: '18026973730',
        tenantCode: 'zszq',
      },
      (err, result) => {
        console.log(result)
      })
    // 根据 id 查询客户
    Meteor.call('debug.getConcreteData', 'Application', {
        _id: "rnDX2CcJATXhdhFHJ",
        tenantCode: 'tfzq'
      },
      (err, result) => {
        console.log(result)
      })

      Meteor.call('debug.getConcreteData', 'Investor', {
        tel: '13552825894',
        tenantCode: 'fzzq',
        name: {
          $ne: "拾贝投资管理（北京）有限公司"
        }
      },
      (err, result) => {
        console.log(result)
      })    
      
      Meteor.call('debug.getConcreteData', 'Staff', {
        _id:"cPzToovcZdpyqDjnh"
      },
      (err, result) => {
        console.log(result)
      })


    Meteor.call(
      'debug.setMultiData',
      'CheckinRecord', {
        "meetingId": "t5WZvPBoK4ij9iDnY",
        "tenantCode": "ctzq",
        "isDeleted": {
          $ne: true
        },
        name: "瑞芯微",
        "checkinDate": new Date("2023-11-23T02:00:08+0000")
      }, {
        $set: {
          "checkinDate": new Date("2023-11-24T02:00:08.000+0000")
        }
      },
      (err, result) => {
        console.log(result)
      })



    Meteor.call(
      'debug.setMultiData',
      'CheckinRecord', {
        "meetingId": "t5WZvPBoK4ij9iDnY",
        "tenantCode": "ctzq",
        "isDeleted": {
          $ne: true
        },
        "checkinDate": {
          $lt: new Date("1970-03-01T00:00:45.253+0000")
        }
      }, {
        $set: {
          "checkinDate": new Date("2023-11-23T02:00:07.782+0000")
        }
      }, {
        "multi": true
      },
      (err, result) => {
        console.log(result)
      })

    Meteor.call(
      'debug.setMultiData',
      'Application', {
        "meetingId": "Ly839mgy5wNawELJg",
        tenantCode: 'tfzq',
        type: "上市公司",
        "assistants.name": "王彬宇"
      }, {
        $set: {
          "assistants.$.id": "vRHgHdL3qePzK8Q9s"
        }
      },
    (err, result) => {
      console.log(result)
    })

    Meteor.call(
      'debug.setMultiData',
      'Meeting', {
        "_id": "HFMFSqGTFw7ojEr5e",
        "tenantCode": "tfzq"
      }, {
        $set: {
          "invitation.sales": "<p><img src=\"https://file.aimeeting.net/aimeeting/images/2024/04/CxfbXdnNiwm8TSdKj_1713234967_gDbyxSih5wZfEkcAr\" data-filename=\"CxfbXdnNiwm8TSdKj_1713234967_gDbyxSih5wZfEkcAr\" style=\"width: 812px;\"><br></p>"
        }
      },
      (err, result) => {
        console.log(result)
      })

    // var list = [
    //   {
    //     "mid": "123",
    //     "subject": "花果山高级会议",
    //     "roomName": "花果山",
    //     "startTime": 1701831600000,
    //     "endTime": 1701835200000,          
    //     "startTimeStr": "11:00",
    //     "endTimeStr": "12:00",
    //     "status": "END",
    //     "reservedBy": {
    //       "name": "孙行者",
    //       "tel": "13712345678"
    //     },
    //     "teleconference": {
    //       "number": 943353310,
    //       "password": "",
    //       "manufacturer": "feishu"
    //     }
    //   },
    //   {
    //     "mid": "456",
    //     "subject": "技术分享会",
    //     "roomName": "608",
    //     "startTime": 1701835200000,
    //     "endTime": 1701837000000,          
    //     "startTimeStr": "12:00",
    //     "endTimeStr": "12:30",
    //     "status": "END",
    //     "reservedBy": {
    //       "name": "Demo",
    //       "tel": "13712345678"
    //     },
    //     "teleconference": {
    //       "number": 943353310,
    //       "password": "",
    //       "manufacturer": "feishu"
    //     }
    //   },
    //   {
    //     "mid": "567",
    //     "subject": "刺客首领",
    //     "roomName": "小鸡岛",
    //     "startTime": 1701842400000,
    //     "endTime": 1701846000000,          
    //     "startTimeStr": "14:00",
    //     "endTimeStr": "15:00",
    //     "status": "MEETING",
    //     "reservedBy": {
    //       "name": "伍六七",
    //       "tel": "13756756756"
    //     },
    //     "teleconference": {
    //       "number": 943353310,
    //       "password": "",
    //       "manufacturer": "feishu"
    //     }
    //   },
    //   {
    //     "mid": "911",
    //     "subject": "茶话会",
    //     "roomName": "一楼大会议室",
    //     "startTime": 1701849600000,
    //     "endTime": 1701853200000,          
    //     "startTimeStr": "16:00",
    //     "endTimeStr": "17:00",
    //     "status": "NOTSTART",
    //     "reservedBy": {
    //       "name": "Livia",
    //       "tel": "13712345678"
    //     },
    //     "teleconference": {
    //       "number": 943353310,
    //       "password": "",
    //       "manufacturer": "feishu"
    //     }
    //   }
    // ]



    // var heard = ['姓名', '手机号码', '所属公司', '邮箱', '职位1']
    // var map = ['姓名', '手机号码', '所属公司']
    // var rows = [['张三','1376232','哈哈'],['李四','4546','ahh'],['王五','668789','无']]
    // var doc = Array.from({ length: rows.length }, () => ({}));
    // // var doc = new Array(rows.length).fill({})

    // heard.forEach((item, index) => {
    //   if(!map.includes(item)) return 
    //   rows.forEach((row, indey) => {
    //     doc[indey][item] = row[index]
    //   })
    // })
    // console.log('doc', doc)
  </script>
</body>

</html>

//